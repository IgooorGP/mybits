# My Bits

A dockerized responsive open-source website that contains some bits about me! Developed in Python with the Django framework for the backend and Angular framework for the frontend. Besides that, Gulp was used to move all the compiled files from Angular to the appropriate Django folders in order to connect front end files with the backend code!

![alt-text](/docs/gif/igp.gif)

## Features

The website contains the following features:

* A socket-based web chat which can be used to ask a bot some info about me such as my name, age, etc;

* An about-me section with some more detailed info about me;

* A section with my favorite github projects;

* A section that tries to describe some of my skills

* Section with my contacts

# File Summary

Here's a list to understand the file structure of the project:

### Config-related files

```Dockerfile```: dockerfile to generate the container of the application; <br/>
```docker-compose```: docker-compose file to generate all the containers of the application;  <br/>
```docker-entrypoint.sh```: shell script used to run the application;  <br/>
```test.sh```: shell script to run the tests of the application.  <br/>

### Django-related files (Backend)

```/backbits```: folder with the Django backend app;  <br/>
```/backbits/static/backbits```: folder with all the static files required by the application;  <br/>
```/backbits/templates```: folder with index.html generated by Angular.  <br/>

### Angular-related files (Frontend)
```/backbits/frontbits```: folder with the Angular app used to generate the frontend;  <br/>
```/backbits/frontbits/gulpfile.js```: gulpfile developed to move frontend files to django's assets folder and templates folder;  <br/>
```/backbits/frontbits/angular.json```: angular configurations in order to run with django;  <br/>


# Building and running

### Starting the backend and the frontend (angular)

In order to run this application, just clone this repo and run the following command!

```docker-compose up```

Since this is a fully dockerized application, starting the application is pretty straight forward!
This starts the development server on port 5000 which serves the Django app.

### Starting the frontend only (angular serve)

In order to run just the angular app (no backend server), just run the following command inside
the frontbits folder:

```ng serve``` or ```gulp serve```

### Building the application

In order to build the angular app and transfer all of its compiled files to be served by Django,
just run the following commands:

Inside the fronbits folder, run:

```gulp build```: this will invoke ng build with the appropriate args and transfer the compiled files
to Django's appropriate folders;

Then, just execute the django server by running the following command on any folder:

```docker-compose up```

That's it! We compiled all the frontend code and transfered them to be served by Django!

# Tests

In order to test the application, just run the following command which triggers nosetests on the container to run all the unit and integration tests:

```docker-compose nosetests```

There are some options to trigger coverage with this!


# Deployment instructions (manual deploy)

This project is hosted on a Google Cloud Computer Engine instance. This Google service
offers a "bare metal" solution for we have to manually configure the instance server. There are,
obviously, more modern options than this one but due mainly to costs and for the sake of learning
server configuration I've choosen this one.

## Server configuration

This project uses a VM instance which comes with Debian 9 as the OS.

### Python 3.7 installation

Installing the dev pre-requisites in order to compile Cython 3.7. Using the
binary ```apt-get``` to install dependencies from the Ubuntu repository
into ```/usr/bin```:

```
sudo apt-get install build-essential checkinstall
sudo apt-get install libreadline-gplv2-dev libncursesw5-dev libssl-dev \
    libsqlite3-dev tk-dev libgdbm-dev libc6-dev libbz2-dev libffi-dev
```

Now, we move to the ```/usr/src``` folder where src could of the system lies. Then, 
we perform an HTTP get with the binary ```wget``` to get a compressed tar version of Python:

```
cd /usr/src
sudo wget https://www.python.org/ftp/python/3.7.0/Python-3.7.0.tgz
```

Uncompress the tar file:

```
sudo tar xzf Python-3.7.0.tgz
```

Compile Python3.7 from source:

```
cd Python-3.7.0
sudo ./configure --enable-optimizations
sudo make altinstall  # necessary not to replace the default python binary file
```

Check the final version:

```
python3.7 -V
```

### PIP installation for Python 2 and 3

Update the Ubuntu's package repository list and install pip:

```
sudo apt update
sudo apt install python-pip  # python 2.x
sudo apt install python3-pip  # python 3.x
```